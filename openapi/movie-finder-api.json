{"openapi":"3.1.0","info":{"title":"OpenAPI definition","version":"v0"},"servers":[{"url":"http://localhost:8080","description":"Generated server url"}],"tags":[{"name":"Movies","description":"Movie management operations"}],"paths":{"/movies/{id}":{"put":{"tags":["Movies"],"summary":"Update a movie","description":"Updates an existing movie and synchronizes its actor associations","operationId":"updateMovie","parameters":[{"name":"id","in":"path","description":"Movie ID","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MovieDTO"}}},"required":true},"responses":{"404":{"description":"Movie not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"409":{"description":"Another movie with this name already exists","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"200":{"description":"Movie updated successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/MovieDTO"}}}},"400":{"description":"Invalid request body","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"401":{"description":"Authentication required","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"403":{"description":"Insufficient permissions","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}}}},"delete":{"tags":["Movies"],"summary":"Delete a movie","description":"Deletes a movie and removes all actor associations","operationId":"deleteMovie","parameters":[{"name":"id","in":"path","description":"Movie ID","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"404":{"description":"Movie not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"409":{"description":"Conflict","content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"204":{"description":"Movie deleted successfully"},"401":{"description":"Authentication required","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"403":{"description":"Insufficient permissions","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}}}}},"/movies":{"get":{"tags":["Movies"],"summary":"Search movies","description":"Retrieves all movies, optionally filtered by publication date range. If only startDate is provided, endDate defaults to today.","operationId":"searchMovies","parameters":[{"name":"name","in":"query","required":false,"schema":{"type":"string"}},{"name":"startDate","in":"query","required":false,"schema":{"type":"string","format":"date"}},{"name":"endDate","in":"query","required":false,"schema":{"type":"string","format":"date"}}],"responses":{"404":{"description":"Not Found","content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"409":{"description":"Conflict","content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"200":{"description":"Movies retrieved successfully","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MovieDTO"}}}}},"400":{"description":"Invalid date format","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"401":{"description":"Authentication required","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"403":{"description":"Insufficient permissions","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}}}},"post":{"tags":["Movies"],"summary":"Create a new movie","description":"Creates a new movie with associated actors. Actors are created if they don't exist.","operationId":"createMovie","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MovieDTO"}}},"required":true},"responses":{"404":{"description":"Not Found","content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"409":{"description":"Movie with this name already exists","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"201":{"description":"Movie created successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/MovieDTO"}}}},"400":{"description":"Invalid request body","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"401":{"description":"Authentication required","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"403":{"description":"Insufficient permissions","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}}}}},"/movies/{name}":{"get":{"tags":["Movies"],"summary":"Get movie by name","description":"Retrieves a specific movie by its exact name","operationId":"getMovieByName","parameters":[{"name":"name","in":"path","description":"Movie name","required":true,"schema":{"type":"string"}}],"responses":{"404":{"description":"Movie not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"409":{"description":"Conflict","content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"200":{"description":"Movie found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/MovieDTO"}}}},"401":{"description":"Authentication required","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"403":{"description":"Insufficient permissions","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}}}}}},"components":{"schemas":{"ProblemDetail":{"type":"object","properties":{"type":{"type":"string","format":"uri"},"title":{"type":"string"},"status":{"type":"integer","format":"int32"},"detail":{"type":"string"},"instance":{"type":"string","format":"uri"},"properties":{"type":"object","additionalProperties":{}}}},"ActorDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"firstname":{"type":"string","minLength":1},"lastname":{"type":"string","minLength":1}},"required":["firstname","lastname"]},"MovieDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string","minLength":1},"genre":{"type":"string","enum":["ACTION","COMEDY","DRAMA","HORROR","ROMANCE","SF","THRILLER","ANIMATION","DOCUMENTARY"]},"publicationDate":{"type":"string","format":"date"},"actors":{"type":"array","items":{"$ref":"#/components/schemas/ActorDTO"},"minItems":1}},"required":["actors","genre","name","publicationDate"]}}}}