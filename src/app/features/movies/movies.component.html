<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
  <!-- Header avec titre et bouton -->
  <div class="flex justify-between items-center mb-6">
    <h1 class="text-3xl font-bold text-gray-900">Movies</h1>
    <button
      (click)="openCreateForm()"
      class="px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors flex items-center gap-2"
      >
      <span class="text-lg">+</span>
      Create movie
    </button>
  </div>

  <!-- Loading state -->
  @if (loading) {
    <div class="card text-center py-8">
      <p class="text-gray-500">Loading movies...</p>
    </div>
  }

  <!-- Error state -->
  @if (error) {
    <div class="card bg-red-50 border border-red-200">
      <p class="text-red-600">{{ error }}</p>
    </div>
  }

  <!-- Table -->
  @if (!loading && !error) {
    <div class="card overflow-hidden p-0">
      <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-50">
          <tr>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
              Name
            </th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
              Genre
            </th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
              Publication Date
            </th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
              Actors
            </th>
            <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">
              Actions
            </th>
          </tr>
        </thead>
        <tbody>
          @for (movie of movies; track movie.id) {
            <tr class="hover:bg-gray-50 transition-colors">
              <td class="px-6 py-4 whitespace-nowrap">
                <span class="text-sm font-medium text-gray-900">{{ movie.name }}</span>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full"
                  [ngClass]="getGenreClass(movie.genre)">
                  {{ movie.genre }}
                </span>
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                {{ movie.publicationDate }}
              </td>
              <td class="px-6 py-4 text-sm text-gray-500">
                @for (actor of movie.actors; track $index; let last = $last) {
                  {{ actor.firstname }} {{ actor.lastname }}@if (!last) {, }
                }
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-right text-sm">
                <button (click)="openEditForm(movie)" class="text-primary-600 hover:text-primary-800 font-medium mr-3">
                  Edit
                </button>
                <button (click)="deleteMovie(movie)" class="text-red-600 hover:text-red-800 font-medium">
                  Delete
                </button>
              </td>
            </tr>
            } @empty {
            <tr>
              <td colspan="5" class="px-6 py-8 text-center text-gray-500">
                No movies found. Create your first movie!
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  }
</div>

<!-- Movie Form Modal -->
@if (showForm) {
  <app-movie-form
    [movie]="selectedMovie"
    (save)="onSaveMovie($event)"
    (cancel)="closeForm()"
    />
}